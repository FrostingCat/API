# Зайцева Юлия Александровна, БПИ213

# Домашнее задание №4
Система обработки заказов ресторана.

## Цель: 
Разработать два отдельных микросервиса на основе RESTful API для системы обработки заказов в ресторане, первый из которых реализует авторизацию пользователей с различными ролями, а второй – управляет заказами и отслеживает запас блюд.

## Микросервис авторизации пользователей

### Регистрация нового пользователя
Регистрация содержит следующую информацию о пользователе: имя, адрес электронной почты, пароль, роль. Почта проверяется на корректность. После успешной регистрации выводится сообщение.

### Вход пользователя в системе
Зарегистрированный пользователь имеет возможность войти в систему по адресу электронной почты и паролю. Сессия управляется с помощью JWT (токена) для поддержания статуса аутентификации пользователя. При вводе пользователем неверной почты или пароля высвечивается соответствующее сообщение об ошибке.

### Предоставление информации о пользователе
После авторизации пользователь может посмотреть информацию о себе: идентификатор, имя, почту, роль. Для пвторизации необходимо ввести "Bearer_" и авторизационный токен пользователя, полученный при входе пользователя в систему.

### Архитектура системы
За регистрацию и авторизацию пользователя отвечают классы AuthenticationRestController и UserRestController. Для реализации проверки почты, добавления пользователя в базу данных и другие основные функции приложения отвечает класс UserServiceImpl. Присутствует единственная сущность User и несколько Dto: AuthenticationRequestDto, SignUpRequestDto, UserDto.

В проекте содержится подключенная база данных user, которая хранит всех зарегистрировавшихся пользователей.

## Микросервис обработки заказов

### Создание заказов
У пользователей есть возможность создавать заказы. Заказ содержит следующую информацию: идентификатор пользователя, список блюд с их количеством, специальные запросы и статус заказа. При создании заказа проверяется наличие блюд в меню, достаточность их кол-ва. Также уменьшается кол-во блюд в меню. На экран выводится сообщение об успешном заказе.

После заказа запускается внутренний обработчик заказов, который переводит заказ из статуса "active" в статус "done".

### Обработка заказов
Внедрен внутренний обработчик заказов, который извлекает из таблицы `orders` заказы в статусе “active”, с некоторой задержкой обрабатывает заказ и меняет его статус на “done”.

### Предоставление информации о заказе
По идентификатору заказа возвращается следующая информация о нем: блюда в заказе с их количеством и статус заказа.

### Управление блюдами
Доступ к управлению блюдами имеет лишь менеджер. Блюда можно добавлять, удалять, изменять. Изменять в блюдах можно отдельные поля, например, только цену. Для изменения блюда необходимо ввести идентификатор пользователя и имя блюда. После ввода идентификатора пользователь проверяется роль пользователя. Если это не менеджер, выводится соответствующее сообщение.

### Предоставление меню
Реализована возможность получать список всех блюд в меню: их идентификаторы, названия, описание, цена, количество.

### Архитектура системы
Для работы с блюдами используется класс ChangeDishRestController, для работы с заказами - OrdersRestController, с меню - ShowMenuRestController. Для реализации  основных функций приложения отвечает класс OrderServiceImpl. Присутствует сущности Dish, DishQuantity, Order, OrderDish и несколько Dto: AddDishDto, ChangeDishDto, DeleteDishDto, MakeOrderDto, ShowOrderDto.

В проекте содержится подключенные базы данных `dish`, `order_dish` и `orders`.
